
{% extends 'base.html.twig' %}
{% block body %}
    <div class="container-fluid">
        <div id="container-pdfs" class="horizontal-scroll-wrapper squares">
  
        </div>
    </div>
    <script>
    var pdfs = {{ pdfs|json_encode()|raw }};
    pdfs.forEach(printPDF);


    function printPDF(elemento, indice) {
        let html = `<div id="pdf_viewer_${indice}">
                        <div class="canvas-container">
                            <canvas id="pdf_renderer_${indice}"></canvas>
                        </div>
                    </div>`;
        
        document.getElementById("container-pdfs").insertAdjacentHTML('beforeend', html);

        pdfjsLib.getDocument('./pdfs/'+elemento).then((pdf) => {
            //cojemos solo una pagina
            pdf.getPage(1).then((page) => {
         
                var canvas = document.getElementById("pdf_renderer_"+indice);
                var ctx = canvas.getContext('2d');
                var viewport = page.getViewport(1);
                canvas.width = viewport.width;
                canvas.height = viewport.height;
                page.render({
                        canvasContext: ctx,
                        viewport: viewport
                    });
                    
            });  
        });
    }
    </script>
    {# //https://code.tutsplus.com/tutorials/how-to-create-a-pdf-viewer-in-javascript--cms-32505 #}
{% endblock %}